# Telegram-бот для оценки аренды квартир
Этот проект решает задачу **прогнозирования справедливой цены аренды квартиры в Москве** на основе объявлений с сайта ЦИАН.  
На основе собранного датасета была обучена модель машинного обучения (CatBoost), а также реализован Telegram-бот, который:

- принимает ссылку на объявление квартиры,  
- парсит ключевые характеристики (кол-во комнат, площадь, этаж, расстояние до метро, район и т.д.),  
- предсказывает рыночную цену аренды,  
- сравнивает её с реальной ценой и сообщает, насколько объявление выгодное или завышенное.  

---

##  Примеры работы бота

<div style="display: flex; gap: 20px;">

<img src="res/ex_1.png" alt="Пример 1" width="400px">
<img src="res/ex_2.png" alt="Пример 2" width="400px">

</div>

##  Данные  

- **Источник:** объявления с [ЦИАН](https://www.cian.ru/).  
- **Объём:** ~10 000 квартир в Москве.  
- **Признаки:**
  - площадь квартиры,  
  - количество комнат,  
  - этаж и этажность дома,  
  - расстояние до метро,  
  - административный округ,  
  - наличие мебели, ремонта и т.д.  
- **Таргет:** цена аренды (₽/месяц).  

---

## Модель  

- Использована **CatBoost Regressor** (градиентный бустинг, хорошо работающий с категориальными признаками).  
- **Предобработка:**
  - очистка данных от выбросов,  
  - преобразование категориальных признаков (округ, метро),  
  - нормализация числовых признаков,  
  - логарифмирование цены для устойчивости.  

### Метрики  
- MAE: ~ 9 200 ₽  
- R² на тесте: **0.78**  
- Средняя ошибка прогноза: **± 5–7% от цены квартиры**.  

---

##  Основные идеи  

- Проверял разные модели (**Linear Regression, Random Forest, CatBoost**).  
- CatBoost показал лучший баланс между скоростью и качеством.  
- В модель добавлены **географические признаки** (округ, расстояние до центра), что заметно улучшило качество.  

Для оценки «завышена ли цена» используется формула:  
delta = (реальная цена - предсказанная) / предсказанная

- если `delta > +10%` → цена завышена,  
- если `delta < -10%` → цена занижена,  
- иначе цена адекватная.  

##  Telegram-бот  

- Написан на **Python**.  
- Получает ссылку на объявление и автоматически парсит данные.  
- Отправляет пользователю:  
  - описание квартиры (район, метраж, комнаты),  
  - прогноз модели,  
  - оценку выгодности. 
---

## Структура проекта
```bash
├── app/                # Основной код бота
│
├── data/               # Датасет квартир
│
├── models/             # Обученная модель
│
├── notebooks/          # IPYNB с обучением
│
├── requirements.txt    # Зависимости проекта
│
└── README.md
```

## ️ Установка и запуск

1. Клонируем репозиторий:
```bash
git clone https://github.com/Egorbobkov/moscow-rent-predictor.git
cd project-root
```
2. Устанавливаем зависимости:
```bash
pip install -r requirements.txt
```
3. Запускаем бота:
```bash
python app/bot.py
```